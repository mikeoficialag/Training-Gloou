sap.ui.define([
	'sap/m/MessagePopover',
	'sap/m/MessageItem',
	'sap/m/MessageToast',
	'sap/ui/core/message/Message',|
	'sap/ui/core/library',
	'sap/ui/core/Core',
	'sap/ui/core/mvc/Controller',
	'sap/ui/model/json/JSONModel',
	'sap/ui/core/Element'
], function (MessagePopover, MessageItem, MessageToast, Message, coreLibrary, Core, Controller, JSONModel, Element) {
	"use strict";

	// shortcut for sap.ui.core.MessageType
	var MessageType = coreLibrary.MessageType;

	return Controller.extend("sap.m.sample.DialogWithMessagePopover.C", {
		onInit: function () {
			var oModel = new JSONModel(sap.ui.require.toUrl("sap/ui/demo/mock/forms.json"));

			this.oView = this.getView();
			this._oMessageManager = Core.getMessageManager();

			// Clear the old messages
		
			this.oView.setModel(oModel);//esta linea mete los inputs en el dialog
	
		},

		onOpenPopoverDialog: function () {
			// create dialog lazily
			if (!this.oMPDialog) {
				this.oMPDialog = this.loadFragment({
					name: "sap.m.sample.DialogWithMessagePopover.MPDialog"
				});
			}
			this.oMPDialog.then(function (oDialog) {
				this.oDialog = oDialog;
				this.oDialog.open();
				this._oMessageManager.registerObject(this.oView.byId("formContainer"), true);

				MessageToast.show('Press "Save" to trigger validation.');
				this.createMessagePopover();
			}.bind(this));
		},

       _save:function () {
           console.log("estas dentro de funcion save");
           // body...
       },//end function

		_closeDialog: function () {
			this.oDialog.close();
		}
	});
});